<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                template="#{LayoutMB.layout}"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="titleOfPage">
        Categorias de Fornecedores
    </ui:define>

    <ui:define name="content">
        <h:form prependId="false"
                id="form">

            <div style="margin-bottom: 10px;">
                <h1>
                    Categorias de Fornecedores
                </h1>
            </div>

            <p:messages autoUpdate="true"/>

            <div class="box box-primary">
                <div class="box-header with-border">
                    <p:commandButton action="form?faces-redirect=true" 
                                     ajax="false" 
                                     icon="fa fa-plus"
                                     value="Novo" 
                                     class="btn btn-xs btn-primary"/>

                    <p:spacer width="5"/>

                    <p:commandButton value="Voltar"
                                     immediate="true"
                                     action="././index?faces-redirect=true"
                                     process="@this"
                                     class="btn btn-xs btn-default"
                                     icon="fa fa-close"/>

                    <p:spacer width="5"/>

                    <p:commandButton value="Excluir Selecionado(s)"
                                     icon="fa fa-trash" 
                                     actionListener="#{CategoriaFornecedorCrudMB.delete()}"
                                     class="btn btn-xs btn-danger"
                                     process="@form"
                                     update="@form">
                        <p:confirm header="Remover"
                                   message="Deseja remover essa(s) categoria(s)?" 
                                   icon="ui-icon-alert" />
                    </p:commandButton>

                    <p:spacer width="5"/>

                    <p:dataTable id="dataTable"
                                 var="item"  
                                 rows="25" 
                                 paginator="true"
                                 pageLinks="5" 
                                 rowsPerPageTemplate="25,50,100"
                                 currentPageReportTemplate="Exibindo: {startRecord}-{endRecord} de {totalRecords} Registros"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 paginatorPosition="bottom"
                                 value="#{CategoriaFornecedorCrudMB.lazyDataModel}" 
                                 selection="#{CategoriaFornecedorCrudMB.itensSelecionados}"
                                 widgetVar="dataTableVar"
                                 reflow="true"
                                 emptyMessage="Nenhum registro encontrado"
                                 lazy="true">


                        <p:column selectionMode="multiple" width="5%" style="text-align: center;"/>

                        <p:column id="id" 
                                  width="5%"
                                  style="text-align: center;"
                                  exportable="true"
                                  sortBy="#{item.id}"
                                  headerText="#">
                            <p:link value="#{item.id}" 
                                    outcome="form.xhtml" >
                                <f:param name="id" value="#{item.id}"/>
                            </p:link>
                        </p:column>

                        <p:column id="nome" 
                                  exportable="true"
                                  sortBy="#{item.nome}"
                                  headerText="Nome">
                            <h:outputText value="#{item.nome}" />
                        </p:column>
                    </p:dataTable>
                </div>
            </div>

            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                <p:commandButton value="NÃ£o" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
            </p:confirmDialog>

        </h:form>
    </ui:define>

</ui:composition>
